set-window-option -g mode-keys vi

# automatically renumber windows when somee are closed
set -g renumber-windows on
set -g base-index 1

# Undercurl
set -g default-terminal "${TERM}"
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'  # undercurl support
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'  # underscore colours - needs tmux-3.0

set -g mouse on
set-option -g status-position top
set-option -g focus-events on # allows to toggle line numbers in vim

set -g set-clipboard on
set -g @yank_selection 'clipboard'
set -g @yank_selection_mouse 'clipboard'
set -g @yank_action 'copy-pipe'

set-option -g clock-mode-style 12
#if-shell 'test ! -z `which powerline-daemon`' 'run-shell "powerline-daemon -q --replace"'
#if-shell 'test ! -z `which powerline-config`' 'run-shell "powerline-config tmux setup"'

#source $HOME/.local/pipx/venvs/powerline-status/lib/python3.10/site-packages/powerline/bindings/tmux/powerline.conf
setenv -g TMUX_PLUGIN_MANAGER_PATH "$HOME/.tmux/plugins/"
set -g @plugin 'tmux-plugins/tpm'
#set -g @plugin 'brennanfee/tmux-paste'
#set -g @plugin 'tmux-plugins/tmux-copycat'
#set -g @plugin 'tmux-plugins/tmux-pain-control'
# set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-sensible'
#set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-battery'

#set -g @nord_tmux_show_status_content '0'
set -g status-right-length 100
# TODO: need to edit .tmux/plugins/nord-tmux/src/nord-status-content.conf
set -g @plugin 'arcticicestudio/nord-tmux'
#set -ga status-right bar
run '~/.tmux/plugins/tpm/tpm'
#set -g status-right "#{prefix_highlight}#[fg=brightblack,bg=black,nobold,noitalics,nounderscore]#[fg=white,bg=brightblack] ${NORD_TMUX_STATUS_DATE_FORMAT} #[fg=white,bg=brightblack,nobold,noitalics,nounderscore]#[fg=white,bg=brightblack] ${NORD_TMUX_STATUS_TIME_FORMAT} #[fg=cyan,bg=brightblack,nobold,noitalics,nounderscore]#[fg=black,bg=cyan,bold] #H "
#set -g status-right '#{battery_status_bg} Batt: #{battery_icon} #{battery_percentage} #{battery_remain} | %a %h-%d %H:%M '
#set-option -g status-right '#H #[fg=green]%I:%M #[fg=aqua]%m.%d.%Y'
#set -goq @themepack-status-left-area-left-format "#S"
#set -goq @themepack-status-left-area-middle-format "#(whoami)"
#set -goq @themepack-status-left-area-right-format "#I:#P"
#set -goq @themepack-status-right-area-left-format "%H:%M:%S"
#set -goq @themepack-status-right-area-middle-format "%d-%b-%y"
#set -goq @themepack-status-right-area-right-format "#H"
#run -b '~/.tmux/plugins/tpm/tpm'
# tmux run-shell ~/.tmux/plugins/nord-tmux/nord.tmux
#source-file "$_current_dir/$NORD_TMUX_STATUS_CONTENT_FILE"
#source-file .config/powerline/themes/tmux/default.json

#set -g status-right "#{prefix_highlight}#[fg=brightblack,bg=black,nobold,noitalics,nounderscore]#[fg=white,bg=brightblack] ${NORD_TMUX_STATUS_DATE_FORMAT} #[fg=white,bg=brightblack,nobold,noitalics,nounderscore]#[fg=white,bg=brightblack] ${NORD_TMUX_STATUS_TIME_FORMAT} #[fg=cyan,bg=brightblack,nobold,noitalics,nounderscore]#[fg=black,bg=cyan,bold] #H "

# =====================================
# ===    Appearence and status bar  ===
# ======================================

# set -g mode-style "fg=default,bg=$color_main"

# # command line style
# set -g message-style "fg=$color_main,bg=$color_dark"

# # status line style
# set -g status-style "fg=$color_status_text,bg=$color_dark"

# # window segments in status line
# set -g window-status-separator ""
# separator_powerline_left=""
# separator_powerline_right=""

# # setw -g window-status-style "fg=$color_status_text,bg=$color_dark"
# setw -g window-status-format " #I:#W "
# setw -g window-status-current-style "fg=$color_light,bold,bg=$color_main"
# setw -g window-status-current-format "#[fg=$color_dark,bg=$color_main]$separator_powerline_right#[default] #I:#W# #[fg=$color_main,bg=$color_dark]$separator_powerline_right#[default]"

# # when window has monitoring notification
# setw -g window-status-activity-style "fg=$color_main"

# outline for active pane
#setw -g pane-active-border-style "fg=$color_main"

# # general status bar settings
# set -g status on
# set -g status-interval 5
# set -g status-position top
# set -g status-justify left
# set -g status-right-length 100

# # define widgets we're going to use in status bar
# # note, that this is not the complete list, some of them are loaded from plugins
# wg_session="#[fg=$color_session_text] #S #[default]"
# wg_battery="#{battery_status_fg} #{battery_icon} #{battery_percentage}"
# wg_date="#[fg=$color_secondary]%h %d %H:%M#[default]"
# wg_user_host="#[fg=$color_secondary]#(whoami)#[default]@#H"
# wg_is_zoomed="#[fg=$color_dark,bg=$color_secondary]#{?window_zoomed_flag,[Z],}#[default]"
# # TODO: highlighted for nested local session as well
# wg_is_keys_off="#[fg=$color_light,bg=$color_window_off_indicator]#([ $(tmux show-option -qv key-table) = 'off' ] && echo 'OFF')#[default]"

# set -g status-left "$wg_session"
# set -g status-right "#{prefix_highlight} $wg_is_keys_off $wg_is_zoomed #{sysstat_cpu} | #{sysstat_mem} | #{sysstat_loadavg} | $wg_user_host | $wg_date $wg_battery #{online_status}"

# # online and offline icon for tmux-online-status
# set -g @online_icon "#[fg=$color_level_ok]●#[default]"
# set -g @offline_icon "#[fg=$color_level_stress]●#[default]"

# # Configure view templates for tmux-plugin-sysstat "MEM" and "CPU" widget
# set -g @sysstat_mem_view_tmpl 'MEM:#[fg=#{mem.color}]#{mem.pused}#[default] #{mem.used}'

# # Configure colors for tmux-plugin-sysstat "MEM" and "CPU" widget
# set -g @sysstat_cpu_color_low "$color_level_ok"
# set -g @sysstat_cpu_color_medium "$color_level_warn"
# set -g @sysstat_cpu_color_stress "$color_level_stress"

# set -g @sysstat_mem_color_low "$color_level_ok"
# set -g @sysstat_mem_color_medium "$color_level_warn"
# set -g @sysstat_mem_color_stress "$color_level_stress"

# set -g @sysstat_swap_color_low "$color_level_ok"
# set -g @sysstat_swap_color_medium "$color_level_warn"
# set -g @sysstat_swap_color_stress "$color_level_stress"


# # Configure tmux-battery widget colors
# set -g @batt_color_full_charge "#[fg=$color_level_ok]"
# set -g @batt_color_high_charge "#[fg=$color_level_ok]"
# set -g @batt_color_medium_charge "#[fg=$color_level_warn]"
# set -g @batt_color_low_charge "#[fg=$color_level_stress]"

# # Configure tmux-prefix-highlight colors
# set -g @prefix_highlight_output_prefix '['
# set -g @prefix_highlight_output_suffix ']'
# set -g @prefix_highlight_fg "$color_dark"
# set -g @prefix_highlight_bg "$color_secondary"
# set -g @prefix_highlight_show_copy_mode 'on'
# set -g @prefix_highlight_copy_mode_attr "fg=$color_dark,bg=$color_secondary"
